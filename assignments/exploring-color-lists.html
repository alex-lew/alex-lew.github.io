<!DOCTYPE html>

<html>
<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-111705087-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-111705087-1');
  </script>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="A homework assignment from CS 1 at Commonwealth School. Use recursion to create fun image filters in Racket.">
  <title>Exploring lists of colors</title>
  <link rel="stylesheet" type="text/css" href="/styles.css">
  <link href="https://fonts.googleapis.com/css?family=Nunito:400,700|Source+Code+Pro" rel="stylesheet">
  <link rel="stylesheet" href="/monokai.css">
  <link rel="stylesheet" href="/tango.css" media="print">
</head>
<body>

  <section id="post">
<div id="breadcrumbs"><a href="/index.html">alex lew</a><span class="breadcrumb-divider"></span><a href="/cs1.html">CS 1</a></div>
          <h1 id="blogtitle">Exploring lists of colors</h1>
          <div id="blogcontent"><div class="nobreak"><h3 class="assignment-heading keep-with-next">Assignment overview</h3><p>Although you’ve only just learned about lists, in fact, you’ve been using them all year! Why? Under the hood, an image is a list of colors.</p></div><p>In this assignment, you will learn to manipulate images by performing operations on the lists of colors that describe them. In the process, you’ll write Instagram-esque image filters and cropping functions.</p><div class="nobreak"><h3 class="assignment-heading keep-with-next">Submission instructions</h3><ol><li><p>Open a new window in DrRacket. Use the “Save definitions as…” menu option to save the file as <code>yourname‑image‑filters.rkt</code>.</p></li><li><p>In your file, write the functions described in the seven required problems below. Each function (including any helper functions you write) should have a contract and—if not immediately clear from the function name—a purpose statement.</p></li><li><p>When you’re finished, upload your Racket file to Google Classroom.</p></li></ol></div><div class="nobreak"><h3 class="assignment-heading keep-with-next">Two important functions</h3><p>Racket comes with two built-in functions that help us convert <em>images</em> to <em>lists of colors</em> and vice versa:</p></div><div class="highlight"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="source"><pre><span></span><span class="n">image-&gt;color-list</span> <span class="n">:</span> <span class="n">Image</span> <span class="k">-&gt;</span> <span class="p">(</span><span class="n">Listof</span> <span class="n">Color</span><span class="p">)</span>
</pre></div></td></tr></tbody></table></div><p>This function takes in an image and produces a list of the colors, representing the colors of each pixel in the image. The list is ordered so that the top left pixel color comes first, then the rest of the pixels in the top row, and then the second row starts, and so on.</p><p>To make sure you understand: what do you think </p><div class="highlight"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="source"><pre><span></span><span class="p">(</span><span class="nb">length</span> <span class="p">(</span><span class="n">image‑&gt;color‑list</span> <span class="p">(</span><span class="n">square</span> <span class="mi">10</span> <span class="s2">"solid"</span> <span class="s2">"green"</span><span class="p">)))</span>
</pre></div></td></tr></tbody></table></div><p> will evaluate to? (The <code>length</code> function determines the length of a list.) Check whether you were right by plugging into DrRacket.</p><p>Here is our second important function:</p><div class="highlight"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="source"><pre><span></span><span class="n">color-list-&gt;bitmap</span> <span class="n">:</span> <span class="p">(</span><span class="n">Listof</span> <span class="n">Color</span><span class="p">)</span> <span class="n">Number</span> <span class="n">Number</span> <span class="k">-&gt;</span> <span class="n">Image</span>
</pre></div></td></tr></tbody></table></div><p>This function takes in a color list, and a width and height, and returns an image created out of pixels of the colors in the list.</p><div class="nobreak"><h4 class="extra-challenge keep-with-next">Extra Challenge: From list to image</h4><p>Can you write your own version of <code>color‑list‑&gt;bitmap</code>? You can use a square of side length 1 to create a single pixel. If you attempt this problem, name the function <code>color‑list‑&gt;image</code>. It should take the same arguments as <code>color‑list‑&gt;bitmap</code> does, and produce the same result. You may find it helpful (or even necessary) to write helper functions.</p></div><div class="nobreak"><h3 class="assignment-heading keep-with-next">Image filters</h3><p>Racket comes with a built-in struct called color:</p></div><div class="highlight"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="source"><pre><span></span><span class="p">(</span><span class="k">define-struct</span> <span class="n">color</span> <span class="p">[</span><span class="n">red</span> <span class="n">green</span> <span class="n">blue</span><span class="p">])</span>
<span class="c1">; you don’t need to define this yourself, as it’s already defined.</span>
</pre></div></td></tr></tbody></table></div><p>The three fields, <code>red</code>, <code>green</code>, and <code>blue</code>, are numbers between 0 and 255, inclusive. They represent the brightness of red, green, and blue components inside a color. For example, white is the color you get when all three components are at maximum brightness: <code>(make‑color 255 255 255)</code>. A bright red color is achieved by setting the red component to 255 and the other two to 0: <code>(make‑color 255 0 0)</code>. Lowering that 255 to, say, 100, gives a darker red color.</p><p>In the following problems, you will be writing image filters, functions that take in an image and change it in some way. They will do this by changing the image into a list of colors, changing each color in some way, and then reassembling the list into an image again.</p><div class="nobreak"><h4 class="assignment-problem keep-with-next"><span class="problem-number">1</span><span class="problem-name">Image filter: Recolorize</span></h4><div class="highlight"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="source"><pre><span></span><span class="n">recolorize</span> <span class="n">:</span> <span class="n">Image</span> <span class="k">-&gt;</span> <span class="n">Image</span>
</pre></div></td></tr></tbody></table></div></div><p>Write a function <code>recolorize</code> that changes an image as follows. Each pixel in the original image is replaced with a pixel whose green component is equal to the original pixel’s red component, whose blue component is equal to the original pixel’s green component, and whose red component is equal to the original pixel’s blue component.</p><div class="nobreak"><h4 class="assignment-problem keep-with-next"><span class="problem-number">2</span><span class="problem-name">Image filter: Brighten</span></h4><div class="highlight"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="source"><pre><span></span><span class="n">brighten</span> <span class="n">:</span> <span class="n">Image</span> <span class="k">-&gt;</span> <span class="n">Image</span>
</pre></div></td></tr></tbody></table></div></div><p>Write a function <code>brighten</code> that brightens an image. Add some number (something between 20 to 80 is a good bet) to every component (red, green, and blue) of every pixel color in the image. Make sure, however, that the components never exceed 255: this will cause an error.</p><div class="nobreak"><h4 class="assignment-problem keep-with-next"><span class="problem-number">3</span><span class="problem-name">Image filter: Grayscale</span></h4><div class="highlight"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="source"><pre><span></span><span class="n">grayscale</span> <span class="n">:</span> <span class="n">Image</span> <span class="k">-&gt;</span> <span class="n">Image</span>
</pre></div></td></tr></tbody></table></div></div><p>A grayscale color is a color whose red, green, and blue values are equal, and therefore looks gray. Write a function <code>grayscale</code> that turns an image into a grayscale version of that image. To do this, transform each color of the image into a grayscale color, whose brightness is based on the overall brightness of the original pixel (average of <code>red</code>, <code>green</code>, and <code>blue</code> brightnesses).</p><div class="nobreak"><h4 class="assignment-problem keep-with-next"><span class="problem-number">4</span><span class="problem-name">Image filter: Sepia</span></h4><div class="highlight"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="source"><pre><span></span><span class="n">sepia</span> <span class="n">:</span> <span class="n">Image</span> <span class="k">-&gt;</span> <span class="n">Image</span>
</pre></div></td></tr></tbody></table></div></div><p>A sepia filter can make an image look old-timey. To implement this filter, change each pixel of the image according to the following equations:</p><div class="highlight"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="source"><pre><span></span><span class="n">newRed</span>   <span class="o">=</span> <span class="p">(</span><span class="n">oldRed</span>   <span class="o">*</span> <span class="o">.</span><span class="mi">393</span><span class="p">)</span>
         <span class="o">+</span> <span class="p">(</span><span class="n">oldGreen</span> <span class="o">*</span> <span class="o">.</span><span class="mi">769</span><span class="p">)</span>
         <span class="o">+</span> <span class="p">(</span><span class="n">oldBlue</span>  <span class="o">*</span> <span class="o">.</span><span class="mi">189</span><span class="p">)</span>

<span class="n">newGreen</span> <span class="o">=</span> <span class="p">(</span><span class="n">oldRed</span>   <span class="o">*</span> <span class="o">.</span><span class="mi">349</span><span class="p">)</span>
         <span class="o">+</span> <span class="p">(</span><span class="n">oldGreen</span> <span class="o">*</span> <span class="o">.</span><span class="mi">686</span><span class="p">)</span>
         <span class="o">+</span> <span class="p">(</span><span class="n">oldBlue</span>  <span class="o">*</span> <span class="o">.</span><span class="mi">168</span><span class="p">)</span>

<span class="n">newBlue</span>  <span class="o">=</span> <span class="p">(</span><span class="n">oldRed</span>   <span class="o">*</span> <span class="o">.</span><span class="mi">272</span><span class="p">)</span>
         <span class="o">+</span> <span class="p">(</span><span class="n">oldGreen</span> <span class="o">*</span> <span class="o">.</span><span class="mi">534</span><span class="p">)</span>
         <span class="o">+</span> <span class="p">(</span><span class="n">oldBlue</span>  <span class="o">*</span> <span class="o">.</span><span class="mi">131</span><span class="p">)</span>
</pre></div></td></tr></tbody></table></div><div class="nobreak"><h4 class="assignment-problem keep-with-next"><span class="problem-number">5</span><span class="problem-name">Image filter: Green screen</span></h4><div class="highlight"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="source"><pre><span></span><span class="n">green-screen</span> <span class="n">:</span> <span class="n">Image</span> <span class="n">Image</span> <span class="k">-&gt;</span> <span class="n">Image</span>
</pre></div></td></tr></tbody></table></div></div><p>This one is a little different. Write a function <code>green-screen</code> that accepts <em>two</em> images, of identical size, as arguments. The first is the “green screen” image, an image taken in front of a green screen, and so it should contain a number of pixels that are very close to <code>(make-color 0 255 0)</code>. The second image is a “backdrop.”</p><p>Your function should construct a new image, where each pixel is equal to the corresponding pixel in the green screen image, unless the pixel is very close to green (red and blue components less than 100, green component above 155), in which case you should use the pixel from the backdrop image. (You may need to play around with the green detection function for some images, changing the tolerance from 100 to, say, 130.)</p><div class="nobreak"><h4 class="extra-challenge keep-with-next">Extra Challenge: Blur</h4><p>Can you create a blur filter? One way to do this is to set each pixel to the average of the ones around it (i.e., all eight neighboring pixels).</p></div><div class="nobreak"><h3 class="assignment-heading keep-with-next">Cropping</h3><p><i>Cropping</i> an image means deleting some of its rows and columns so that only a portion of the image remains. The last two questions ask you to write functions for cropping an image.</p></div><div class="nobreak"><h4 class="assignment-problem keep-with-next"><span class="problem-number">6</span><span class="problem-name">Crop off the top</span></h4><div class="highlight"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="source"><pre><span></span><span class="n">crop-top</span> <span class="n">:</span> <span class="n">Image</span> <span class="n">Number</span> <span class="k">-&gt;</span> <span class="n">Image</span>
</pre></div></td></tr></tbody></table></div></div><p>Write a function <code>crop-top</code> that takes in an image and a number <code>n</code>, and returns the same image but with the top <code>n</code> rows cut off.</p><div class="nobreak"><h4 class="assignment-problem keep-with-next"><span class="problem-number">7</span><span class="problem-name">Top and bottom</span></h4><div class="highlight"><table class="sourcetable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="source"><pre><span></span><span class="n">crop-vertical</span> <span class="n">:</span> <span class="n">Image</span> <span class="n">Number</span> <span class="n">Number</span> <span class="k">-&gt;</span> <span class="n">Image</span>
</pre></div></td></tr></tbody></table></div></div><p>Write a function <code>crop-vertical</code> that takes in an image and two numbers, <code>from-top</code> and <code>from-bottom</code>, and returns the image with the top <code>from-top</code> rows and bottom <code>from-bottom</code> rows chopped off. You may find it helpful to call <code>crop-top</code> and to write a helper <code>crop-bottom</code> function.</p><div class="nobreak"><h4 class="extra-challenge keep-with-next">Extra Challenge: Horizontal cropping</h4><p>Instead of cropping rows from the top and bottom, write functions that crop columns from the left and right.</p></div></div>
  </section>
</body>